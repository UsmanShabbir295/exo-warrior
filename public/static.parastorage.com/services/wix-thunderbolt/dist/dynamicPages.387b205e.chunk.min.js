(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[8391],{36146:function(e,t,n){"use strict";n.r(t),n.d(t,{DynamicPagesResponseHandlerSymbol:function(){return d.h8},site:function(){return x}});var a=n(56510),r=n(75471),s=n(52192),o=n(25259),i=n(14439),c=n(21980),l=n(31619),d=n(88548);const u="__403__dp",p="__404__dp",g="__500__dp",f="__uknown_error__dp",h=e=>e.replace("./","").split("/"),b=e=>/(^https?)|(^data)|(^blob)|(^\/\/)/.test(e),m=(e,t)=>/^\/(.*)/.test(e)?`.${e}`:`./${t}/${e}`,D=e=>h(e)[0];var I,_=n(21085);!function(e){e.PAGES="pages",e.SITEMAP="sitemap"}(I||(I={}));const y=(0,a.ff)([(0,a.t6)(o.R9,d.u2),l.X,i.U,r.Iz,d.h8,d.Dp,c.ZQ,_.p],(({prefixToRouterFetchData:e,routerPagesSeoToIdMap:t,externalBaseUrl:n,viewMode:a},r,o,i,{handleResponse:c},l,d,u)=>{const g=(e,t,r)=>{const{routerPrefix:s,config:o,pageRoles:i}=e.optionsData.bodyData,c=(e=>`/${h(e).slice(1).join("/")}`)(t),l=`${n}${s}${c}${r}`;return JSON.stringify({routerPrefix:s,routerSuffix:c,fullUrl:l,config:o,pageRoles:i,requestInfo:{env:"browser",formFactor:a}})},f=(e,t,n,a)=>{var o;const{basePath:i,queryParams:c,appDefinitionId:l}=e.urlData,p=((e,t,n)=>{const a=new URL(e);return a.searchParams.append(t,n),a.toString()})(`${i}/${a}?${c}`,"instance",r.getAppInstanceByAppDefId(l)),f=e.shouldAddWixCodeInstanceToHeader&&r.getAppInstanceByAppDefId(e.wixCodeAppDefinitionId);return f&&(e.optionsData.headers.Authorization=f),e.optionsData.headers["X-XSRF-TOKEN"]=(0,s.m5)(null===(o=null==d?void 0:d.document)||void 0===o?void 0:o.cookie),{url:p,options:Object.assign(Object.assign({method:"POST",body:g(e,t,n),headers:Object.assign(Object.assign({},{commonConfig:JSON.stringify(u.getCommonConfig())}),e.optionsData.headers)},e.optionsData.credentials?{credentials:e.optionsData.credentials}:{}),e.optionsData.mode?{mode:e.optionsData.mode}:{})}};return{getSitemapFetchParams(t){const n=e[t];return n?f(n,i.getRelativeEncodedUrl(),i.getParsedUrl().search,I.SITEMAP):null},async handle(n){if(!n.pageId&&n.relativeUrl&&n.parsedUrl&&n.relativeEncodedUrl){const a=D(n.relativeUrl),r=e[a];if(!r)return t[a]?Object.assign(Object.assign({},n),{pageId:p}):n;const{url:s,options:i}=f(r,n.relativeEncodedUrl,n.parsedUrl.search,I.PAGES),d=c(o.envFetch(s,i),n);return l.getHandler().handle(d,n)}return n}}}));var v=n(13487),U=n(90602),S=n(24888),j=n(47216);const O=(0,a.ff)([(0,a.t6)(o.R9,d.u2),c.ZQ,U.Ji,j.QJ,S.O,(0,a.jt)(c.sb)],(({externalBaseUrl:e},t,n,a,r,o)=>({async handleResponse(n,r){const i=D(r.relativeUrl);return n.then((async n=>{if(!n.ok)throw n;const c=await n.json(),{result:l,exception:d}=c,{redirectUrl:h,status:D}=l;if(D&&(0,s.yF)(t)&&a.isInSEO()&&a.setVeloSeoStatusCode(D),h){if((0,s.yF)(t)){const t=((e,t,n,a)=>{if(b(e))return e;const r=m(e,n),s=new URL(r,`${t}/`);return s.search=a,s.toString()})(h,e,i,r.parsedUrl.search);return a.setRedirectUrl(t),null}if(await o,t.document.head.querySelector('meta[http-equiv="refresh"]'))return null;if(b(h))return t.location.assign(h),null;return{redirectUrl:m(h,i)}}const I=(({status:e,page:t,redirectUrl:n},a)=>a?g:403===e?u:404===e?p:t||n?null:f)(l,d);return I?Object.assign(Object.assign({},r),{pageId:I}):((e,t)=>{const{page:n,data:a,head:r,tpaInnerRoute:s,publicData:o}=t.result;return Object.assign(Object.assign({},e),{pageId:n,dynamicRouteData:{pageData:a,pageHeadData:r,publicData:o,tpaInnerRoute:s}})})(r,c)})).catch((()=>(0,s.yF)(t)?null:Object.assign(Object.assign({},r),{pageId:g})))}})));var w=n(2922),P=n(50997),R=n(6504);const A=(0,a.ff)([(0,a.t6)(o.Wf,d.u2),r.F0,w.jj,(0,a.jt)(P.n9)],((e,t,n,a)=>{const r=async(e,r)=>{const{success:s,reason:o}=await(async()=>{try{return await a.promptLogin(),{success:!0,reason:""}}catch(e){return{success:!1,reason:e}}})();return o===R.$9.CANCELED&&n.isLandingOnProtectedPage()?t.navigate("./"):!!s&&t.navigate(r.parsedUrl.href)};return e.update((()=>({handlePermissions:r,isMemberLoggedIn:async()=>!!await(null==a?void 0:a.getMemberDetails()),isSiteMembersInstalled:!!a}))),{appWillMount:async()=>{}}})),$=(0,a.ff)([(0,a.t6)(o.Wf,d.u2)],(e=>({getHandler:()=>({handle:async(t,n)=>{const a=await t,{handlePermissions:r,isMemberLoggedIn:s,isSiteMembersInstalled:o}=e.get(),i=await s();return o&&(null==a?void 0:a.pageId)===u&&!i?(r(a,n),null):a}})}))),x=e=>{e(r.BD.Dynamic,o.o8).to(y),e(d.h8).to(O),e(d.N8,v.j.AppWillMountHandler).to(A),e(d.Dp).to($)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/dynamicPages.387b205e.chunk.min.js.map